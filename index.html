<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAS ê°œí¸ì•ˆ</title>
    <style>
        ul {
            list-style-type: none;
            padding-left: 20px;
        }

        .folder {
            cursor: pointer;
            font-weight: bold;
        }

        .folder::before {
            content: "ğŸ“‚ ";
        }

        .file::before {
            content: "ğŸ“„ ";
        }

        .hidden {
            display: none;
        }

        li {
            margin: 5px 0;
            padding: 5px;
            cursor: grab;
            border: none;
            background-color: transparent;
        }

        .dragging {
            opacity: 1;
            border: 2px dashed #007bff;
        }

        .drag-over {
            background-color: #e0f7fa;
        }
    </style>
</head>
<body>

<h2>NAS ê°œí¸ì•ˆ</h2>
<ul id="folderTree">
    <li draggable="true">
        <span class="folder" onclick="toggleFolder(this)">31-ìš©ì—­</span>
        <button onclick="addFolderOrFile(this, true)">ì¶”ê°€</button>
        <ul>
            <li draggable="true">
                <span class="folder" onclick="toggleFolder(this)">00-WORK0000</span>
                <button onclick="addFolderOrFile(this, false)">ì¶”ê°€</button>
                <button onclick="editName(this)">í¸ì§‘</button>
                <button onclick="removeFolder(this)">ì‚­ì œ</button>
                <ul>
                    <li draggable="true"><span class="file">êµ¬ì¡°ì„¤ê³„ ë° ê²€í† </span>
                        <button onclick="editName(this)">í¸ì§‘</button>
                        <button onclick="removeFolder(this)">ì‚­ì œ</button>
                    </li>
                    <li draggable="true"><span class="file">ë‚´ì§„ì„±ëŠ¥í‰ê°€</span>
                        <button onclick="editName(this)">í¸ì§‘</button>
                        <button onclick="removeFolder(this)">ì‚­ì œ</button>
                    </li>
                    <li draggable="true"><span class="file">ì„±ëŠ¥ê¸°ë°˜ì„¤ê³„</span>
                        <button onclick="editName(this)">í¸ì§‘</button>
                        <button onclick="removeFolder(this)">ì‚­ì œ</button>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll("ul").forEach(ul => ul.classList.remove("hidden"));
    });

    function toggleFolder(folder) {
        const subList = folder.nextElementSibling.nextElementSibling;
        if (subList && subList.tagName === "UL") {
            subList.style.display = subList.style.display === "none" ? "block" : "none";
        }
    }

    function addFolderOrFile(button, isFolder) {
        const parentLi = button.parentElement;
        let ul = parentLi.querySelector("ul");
        if (!ul) {
            ul = document.createElement("ul");
            parentLi.appendChild(ul);
        }
        const newLi = document.createElement("li");
        newLi.draggable = true;
        newLi.addEventListener("dragstart", dragStart);
        newLi.addEventListener("dragover", dragOver);
        newLi.addEventListener("dragleave", dragLeave);
        newLi.addEventListener("drop", drop);

        const newItem = document.createElement("span");
        if (isFolder) {
            newItem.classList.add("folder");
            newItem.textContent = "ìƒˆ í´ë”";
            newItem.onclick = function () { toggleFolder(newItem); };
        } else {
            newItem.classList.add("file");
            newItem.textContent = "ìƒˆ íŒŒì¼";
        }
        
        const addBtn = document.createElement("button");
        addBtn.textContent = "ì¶”ê°€";
        addBtn.onclick = function () { addFolderOrFile(addBtn, !isFolder); };
        
        const editBtn = document.createElement("button");
        editBtn.textContent = "í¸ì§‘";
        editBtn.onclick = function () { editName(editBtn); };

        const removeBtn = document.createElement("button");
        removeBtn.textContent = "ì‚­ì œ";
        removeBtn.onclick = function () { removeFolder(removeBtn); };
        

        newLi.appendChild(newItem);
        if (isFolder) {
            newLi.appendChild(addBtn);
        }
        newLi.appendChild(editBtn);
        newLi.appendChild(removeBtn);
        ul.appendChild(newLi);
    }

    function removeFolder(button) {
        const parentLi = button.parentElement;
        if (parentLi.parentElement) {
            parentLi.parentElement.removeChild(parentLi);
        }
    }

    function editName(button) {
        const nameSpan = button.parentElement.querySelector("span");
        const newName = prompt("ìƒˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:", nameSpan.textContent);
        if (newName !== null && newName.trim() !== "") {
            nameSpan.textContent = newName;
        }
    }

    function dragStart(event) {
        event.dataTransfer.setData("text/plain", event.target.id);
        event.target.classList.add("dragging");
    }

    function dragOver(event) {
        event.preventDefault();
        event.target.classList.add("drag-over");
    }

    function dragLeave(event) {
        event.target.classList.remove("drag-over");
    }

    function drop(event) {
        event.preventDefault();
        event.target.classList.remove("drag-over");
        const draggedElement = document.querySelector(".dragging");
        if (draggedElement) {
            draggedElement.classList.remove("dragging");
            const dropTarget = event.target.closest("li");
            if (dropTarget && dropTarget.parentElement) {
                dropTarget.parentElement.insertBefore(draggedElement, dropTarget);
            }
        }
    }

    document.querySelectorAll("li").forEach(item => {
        item.addEventListener("dragstart", dragStart);
        item.addEventListener("dragover", dragOver);
        item.addEventListener("dragleave", dragLeave);
        item.addEventListener("drop", drop);
    });
</script>

</body>
</html>
